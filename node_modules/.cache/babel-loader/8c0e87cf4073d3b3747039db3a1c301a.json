{"ast":null,"code":"var _jsxFileName = \"/Users/diogo.sampaio/Documents/ionic/login_auth/src/pages/Profile.tsx\";\nimport { IonContent, IonHeader, IonPage, IonTitle, IonToolbar, IonItemDivider, IonButton, IonButtons } from '@ionic/react';\nimport React, { useState, useEffect } from 'react';\nimport axios from \"axios\";\nimport { useHistory } from \"react-router-dom\";\nimport { IonGrid, IonRow, IonCol } from '@ionic/react';\nimport { IonItem, IonLabel, IonAvatar } from '@ionic/react';\nimport Cookies from \"js-cookie\";\n\nconst Dashboard = ({\n  match\n}) => {\n  const history = useHistory();\n  const [users, setUsers] = useState([]);\n  const [isLoggedOut, setIsLoggedOut] = useState(false); // Add a state variable to track the logged-out state\n\n  const token = Cookies.get(\"accessToken\");\n\n  const handleLogout = () => {\n    Cookies.remove(\"accessToken\");\n    setIsLoggedOut(true); // Set the logged-out state to true\n  };\n\n  useEffect(() => {\n    const api = axios.create({\n      baseURL: `http://localhost:8080/v1`\n    });\n    api.get(\"/users\", {\n      headers: {\n        Authorization: `Bearer ${token}`\n      }\n    }).then(res => {\n      setUsers(res.data);\n    }).catch(error => {\n      console.log(\"Error fetching data\");\n    });\n  }, [isLoggedOut]);\n\n  if (isLoggedOut) {\n    history.push(\"/\"); // Redirect to the home page if the user is logged out\n\n    return null; // Return null to prevent the component from rendering anything\n  }\n\n  return /*#__PURE__*/React.createElement(IonPage, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(IonHeader, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(IonToolbar, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(IonTitle, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 3\n    }\n  }, \"Dasboard\"), /*#__PURE__*/React.createElement(IonButtons, {\n    slot: \"end\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 3\n    }\n  }, /*#__PURE__*/React.createElement(IonButton, {\n    onClick: () => {},\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 5\n    }\n  }, \"Logout\")))), /*#__PURE__*/React.createElement(IonContent, {\n    fullscreen: true,\n    className: \"ion-padding ion-text-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(IonGrid, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(IonRow, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(IonCol, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"h4\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 19\n    }\n  }, \"Welcome: \", match.params.id), /*#__PURE__*/React.createElement(IonItemDivider, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 19\n    }\n  }))), /*#__PURE__*/React.createElement(IonRow, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(IonCol, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 13\n    }\n  }, users.map((user, i) => {\n    return /*#__PURE__*/React.createElement(IonItem, {\n      key: i,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(IonAvatar, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      src: user.avatar,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 25\n      }\n    })), /*#__PURE__*/React.createElement(IonLabel, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"h2\", {\n      style: {\n        paddingLeft: \"10px\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 25\n      }\n    }, user.username, \" \"), /*#__PURE__*/React.createElement(\"p\", {\n      style: {\n        paddingLeft: \"10px\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 25\n      }\n    }, user.email)));\n  }))))));\n};\n\nexport default Dashboard;","map":{"version":3,"sources":["/Users/diogo.sampaio/Documents/ionic/login_auth/src/pages/Profile.tsx"],"names":["IonContent","IonHeader","IonPage","IonTitle","IonToolbar","IonItemDivider","IonButton","IonButtons","React","useState","useEffect","axios","useHistory","IonGrid","IonRow","IonCol","IonItem","IonLabel","IonAvatar","Cookies","Dashboard","match","history","users","setUsers","isLoggedOut","setIsLoggedOut","token","get","handleLogout","remove","api","create","baseURL","headers","Authorization","then","res","data","catch","error","console","log","push","params","id","map","user","i","avatar","paddingLeft","username","email"],"mappings":"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","sourcesContent":["import { IonContent, IonHeader, IonPage, IonTitle, IonToolbar, IonItemDivider, IonButton, IonButtons } from '@ionic/react';\nimport React, { useState, useEffect } from 'react';\nimport axios from \"axios\";\nimport { useHistory, RouteComponentProps } from \"react-router-dom\";\nimport { IonGrid, IonRow, IonCol } from '@ionic/react';\nimport { IonItem, IonLabel, IonAvatar } from '@ionic/react';\nimport Cookies from \"js-cookie\";\n\ninterface ResetProps\n  extends RouteComponentProps<{\n    id: string;\n  }> {}\n\nconst Dashboard: React.FC<ResetProps> = ({ match }) => {\n  const history = useHistory();\n  const [users, setUsers] = useState<Array<any>>([]);\n  const [isLoggedOut, setIsLoggedOut] = useState(false); // Add a state variable to track the logged-out state\n  const token = Cookies.get(\"accessToken\");\n\n  const handleLogout = () => {\n    Cookies.remove(\"accessToken\");\n    setIsLoggedOut(true); // Set the logged-out state to true\n  };\n\n\n  useEffect(() => {\n    const api = axios.create({\n        baseURL: `http://localhost:8080/v1`\n    })\n    api.get(\"/users\", {\n      headers: {\n        Authorization: `Bearer ${token}`,\n      },\n    })\n        .then(res => {             \n            setUsers(res.data)\n        })\n        .catch(error=>{\n            console.log(\"Error fetching data\")\n        })\n  }, [isLoggedOut]);\n\n  if (isLoggedOut) {\n    history.push(\"/\"); // Redirect to the home page if the user is logged out\n    return null; // Return null to prevent the component from rendering anything\n  }\n\n  return (\n    <IonPage>\n      <IonHeader>\n        <IonToolbar>\n  <IonTitle>Dasboard</IonTitle>\n  <IonButtons slot=\"end\">\n    <IonButton onClick={() => {}}>Logout</IonButton>\n  </IonButtons>\n        </IonToolbar>\n      </IonHeader>\n      <IonContent fullscreen className=\"ion-padding ion-text-center\">\n        <IonGrid>\n          <IonRow>\n              <IonCol>\n                  <h4>Welcome: {match.params.id}</h4>\n                  <IonItemDivider></IonItemDivider>\n              </IonCol>\n          </IonRow>\n          <IonRow>\n            <IonCol>\n              {users.map((user, i) => {\n                return (\n                  <IonItem key={i}>\n                    <IonAvatar>\n                        <img src={user.avatar} />\n                    </IonAvatar>\n                    <IonLabel>\n                        <h2 style={{ paddingLeft: \"10px\" }}>{user.username} </h2>\n                        <p style={{ paddingLeft: \"10px\" }}>{user.email}</p>\n                    </IonLabel>\n                  </IonItem>\n                );\n              })}\n            </IonCol>\n          </IonRow>\n        </IonGrid>\n      </IonContent>\n    </IonPage>\n  );\n};\n\nexport default Dashboard;\n"]},"metadata":{},"sourceType":"module"}